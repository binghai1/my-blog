{"version":3,"sources":["page/admin/userManage/index.jsx"],"names":["UserManage","state","list","pagination","loading","q","getColumns","title","dataIndex","sorter","a","b","moment","createdAt","isBefore","render","text","record","react__WEBPACK_IMPORTED_MODULE_13___default","createElement","antd_es_button__WEBPACK_IMPORTED_MODULE_7__","type","onClick","_this","handleDelete","_id","username","fetchList","page","setState","axios","get","findUsersUrl","then","res","pageSize","total","data","totalCount","userId","antd_es_modal__WEBPACK_IMPORTED_MODULE_5__","confirm","content","concat","onOk","delete","deleteUserUrl","handleChange","current","handleClick","handleInput","e","target","value","this","_this$state","className","style","marginBottom","antd_es_input__WEBPACK_IMPORTED_MODULE_3__","width","onChange","placeholder","marginLeft","antd_es_table__WEBPACK_IMPORTED_MODULE_1__","rowKey","bordered","columns","dataSource","Component"],"mappings":"4QAKMA,6MACJC,MAAQ,CACNC,KAAM,GACNC,WAAY,GACZC,SAAS,EACTC,EAAE,MAOJC,WAAa,WACX,MAAO,CACL,CACEC,MAAO,qBACPC,UAAW,YAEb,CACED,MAAO,2BACPC,UAAW,YACXC,OAAQ,SAACC,EAAGC,GAAJ,OAAWC,IAAOF,EAAEG,WAAWC,SAASH,EAAEE,WAAa,GAAK,IAEtE,CACEN,MAAO,eACPC,UAAW,SAEb,CACED,MAAO,eACPQ,OAAQ,SAACC,EAAMC,GAAP,OACNC,EAAAR,EAAAS,cAAAC,EAAA,GAAQC,KAAK,SAASC,QAAS,kBAAMC,EAAKC,aAAaP,EAAOQ,IAAKR,EAAOS,YAA1E,sBAQRC,UAAY,SAACC,EAAKvB,GAChBkB,EAAKM,SAAS,CAAEzB,SAAS,IACzB0B,IAAMC,IAAIC,YAAaJ,EAAKvB,IAAI4B,KAAK,SAAAC,GACnC,IAAM/B,EAAa,CACjBgC,SAAS,EACTC,MAAOF,EAAIG,KAAKC,YAElBf,EAAKM,SAAS,CAAE3B,KAAMgC,EAAIG,KAAKA,KAAMlC,aAAYC,SAAS,SAI9DoB,aAAc,SAACe,EAAQb,GACrBc,EAAA,EAAMC,QAAQ,CACZlC,MAAO,0GACPmC,QAAO,sBAAAC,OAASjB,EAAT,KACPkB,KAAM,WACJd,IAAMe,OAAOC,YAAcP,IAASN,KAAK,SAAAC,YAU/Ca,aAAe,SAAA5C,GACboB,EAAKI,UAAUxB,EAAW6C,YAE5BC,YAAY,WACV1B,EAAKI,UAAU,GAAGJ,EAAKtB,MAAMI,MAE/B6C,YAAY,SAAAC,GACR5B,EAAKM,SAAS,CAACxB,EAAE8C,EAAEC,OAAOC,4FA9D5BC,KAAK3B,6CAgEE,IAAA4B,EAC+BD,KAAKrD,MAAnCC,EADDqD,EACCrD,KAAMC,EADPoD,EACOpD,WAAYC,EADnBmD,EACmBnD,QAC1B,OACEc,EAAAR,EAAAS,cAAA,OAAKqC,UAAU,IACbtC,EAAAR,EAAAS,cAAA,OAAKsC,MAAO,CAACC,aAAa,KACtBxC,EAAAR,EAAAS,cAAAwC,EAAA,GAAOF,MAAO,CAACG,MAAM,KAAMC,SAAUP,KAAKJ,YAAaY,YAAY,yCACnE5C,EAAAR,EAAAS,cAAAC,EAAA,GAAQqC,MAAO,CAACM,WAAW,IAAKzC,QAASgC,KAAKL,aAA9C,iBAEJ/B,EAAAR,EAAAS,cAAA6C,EAAA,GACEC,OAAQ,SAAAhD,GAAM,OAAEA,EAAOQ,KACvByC,UAAQ,EACRC,QAASb,KAAKhD,aACdF,QAASA,EACTgE,WAAYlE,EACZC,WAAYA,EACZ0D,SAAUP,KAAKP,uBAxFAsB,aA+FVrE","file":"static/js/18.92cbbb21.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport moment from 'moment'\nimport { Table, Button, Modal, Input } from 'antd'\nimport {findUsersUrl,deleteUserUrl} from '@/util/interfaces'\nimport axios from 'axios'\nclass UserManage extends Component {\n  state = {\n    list: [],\n    pagination: {},\n    loading: false,\n    q:\"\"\n  }\n\n  componentDidMount() {\n    this.fetchList()\n  }\n\n  getColumns = () => {\n    return [\n      {\n        title: '用户名',\n        dataIndex: 'username'\n      },\n      {\n        title: '注册时间',\n        dataIndex: 'createdAt',\n        sorter: (a, b) => (moment(a.createdAt).isBefore(b.createdAt) ? 1 : -1)\n      },\n      {\n        title: '邮箱',\n        dataIndex: 'email',\n      },\n      {\n        title: '操作',\n        render: (text, record) => (\n          <Button type=\"danger\" onClick={() => this.handleDelete(record._id, record.username)}>\n            删除\n          </Button>\n        )\n      }\n    ]\n  }\n\n  fetchList = (page,q) => {\n    this.setState({ loading: true })\n    axios.get(findUsersUrl(page,q)).then(res => {\n      const pagination = {\n        pageSize:6,\n        total: res.data.totalCount\n      }\n      this.setState({ list: res.data.data, pagination, loading: false })\n    })\n  }\n\n  handleDelete =(userId, username) => {\n    Modal.confirm({\n      title: '您确认删除该用户?，此操作不可恢复！',\n      content: `用户： ${username} `,\n      onOk: () => {\n        axios.delete(deleteUserUrl(userId)).then(res => {\n        //   if (res.code === 200) {\n        //     this.fetchList(this.state.pagination)\n        //     message.success(res.message)\n        //   }\n        })\n      }\n    })\n  }\n\n  handleChange = pagination => {\n    this.fetchList(pagination.current)\n  }\n  handleClick=()=>{\n    this.fetchList(\"\",this.state.q)\n  }\n  handleInput=e=>{\n      this.setState({q:e.target.value})\n  }\n  render() {\n    const { list, pagination, loading } = this.state\n    return (\n      <div className=\"\">\n        <div style={{marginBottom:20}}>\n            <Input style={{width:200}} onChange={this.handleInput} placeholder=\"请输入用户名\"></Input>\n            <Button style={{marginLeft:10}} onClick={this.handleClick}>检索</Button>\n        </div>\n        <Table\n          rowKey={record=>record._id}\n          bordered\n          columns={this.getColumns()}\n          loading={loading}\n          dataSource={list}\n          pagination={pagination}\n          onChange={this.handleChange}\n        />\n      </div>\n    )\n  }\n}\n\nexport default UserManage\n"],"sourceRoot":""}