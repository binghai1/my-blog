{"version":3,"sources":["page/admin/index.jsx"],"names":["Header","Sider","Content","SubMenu","menuList","icon","text","path","children","Admin","connect","state","user","withRouter","collapsed","openKeys","toggle","_this","setState","this","props","location","history","role","push","pathname","index","lastIndexOf","slice","data","_this2","map","item","react__WEBPACK_IMPORTED_MODULE_13___default","a","createElement","key","title","antd_es_icon__WEBPACK_IMPORTED_MODULE_1__","type","renderMenu","antd_es_menu__WEBPACK_IMPORTED_MODULE_10__","Item","react_router_dom__WEBPACK_IMPORTED_MODULE_15__","to","antd_es_layout__WEBPACK_IMPORTED_MODULE_12__","className","trigger","collapsible","theme","mode","defaultOpenKeys","defaultSelectedKeys","style","background","padding","onClick","margin","Component"],"mappings":"yRAMQA,sBAAQC,YAAOC,cACfC,cACFC,EAAS,CACX,CACAC,KAAK,OACLC,KAAK,eACLC,KAAK,eAGL,CACIF,KAAK,OACLC,KAAK,2BACLC,KAAK,kBACLC,SAAS,CACL,CACIH,KAAK,OACLE,KAAK,uBACLD,KAAK,sBAET,CACID,KAAK,SACLE,KAAK,yBACLD,KAAK,8BAIjB,CACED,KAAK,OACLC,KAAK,eACLC,KAAK,wBAQLE,KAHLC,YAAQ,SAACC,GAAD,MAAU,CAACC,KAAKD,EAAMC,QAD9BC,6NAKCF,MAAQ,CACNG,WAAW,EACXC,SAAS,MAaXC,OAAS,WACPC,EAAKC,SAAS,CACZJ,WAAYG,EAAKN,MAAMG,2NAZlBF,EAAMO,KAAKC,MAAXR,OACkBO,KAAKC,MAAzBC,aAASC,YACVV,GAAkB,uBAAZA,EAAKW,MACbD,EAAQE,KAAK,KAETC,EAASJ,EAASI,SAClBC,EAAMD,EAASE,YAAY,KAC3BZ,EAAS,CAACU,EAASG,MAAM,EAAEF,IACjCP,KAAKD,SAAS,CAACH,kJAONc,GAAK,IAAAC,EAAAX,KACd,OAAOU,EAAKE,IAAI,SAACC,GAAD,OACZA,EAAKxB,SAASyB,EAAAC,EAAAC,cAAChC,EAAD,CAASiC,IAAKJ,EAAKzB,KAAO8B,MACpCJ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAAG,EAAA,GAAMC,KAAMP,EAAK3B,OACjB4B,EAAAC,EAAAC,cAAA,YAAOH,EAAK1B,QAGfwB,EAAKU,WAAWR,EAAKxB,WAEvByB,EAAAC,EAAAC,cAAAM,EAAA,EAAMC,KAAN,CAAWN,IAAKJ,EAAKzB,MAClB0B,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAMC,GAAIZ,EAAKzB,MACX0B,EAAAC,EAAAC,cAAAG,EAAA,GAAMC,KAAMP,EAAK3B,OACjB4B,EAAAC,EAAAC,cAAA,YAAOH,EAAK1B,2CAMxB,OACE2B,EAAAC,EAAAC,cAAAU,EAAA,GAAQC,UAAU,mBAChBb,EAAAC,EAAAC,cAAClC,EAAD,CAAO8C,QAAS,KAAMC,aAAW,EAAClC,UAAWK,KAAKR,MAAMG,WACtDmB,EAAAC,EAAAC,cAAA,OAAKW,UAAU,SACfb,EAAAC,EAAAC,cAAAM,EAAA,GAAOQ,MAAM,OAAOC,KAAK,SAASC,gBAAiBhC,KAAKR,MAAMI,SAAUqC,oBAAqB,CAACjC,KAAKC,MAAMC,SAASI,WAC3GN,KAAKqB,WAAWpC,KAGzB6B,EAAAC,EAAAC,cAAAU,EAAA,OACEZ,EAAAC,EAAAC,cAACnC,EAAD,CAAQqD,MAAO,CAAEC,WAAY,OAAQC,QAAS,IAC5CtB,EAAAC,EAAAC,cAAAG,EAAA,GACEQ,UAAU,UACVP,KAAMpB,KAAKR,MAAMG,UAAY,cAAgB,YAC7C0C,QAASrC,KAAKH,UAIlBiB,EAAAC,EAAAC,cAACjC,EAAD,CAAS4C,UAAU,qBACjBO,MAAO,CACLI,OAAQ,YACRF,QAAS,GACTD,WAAY,SAIfnC,KAAKC,MAAMZ,mBAjEFkD,sBAyEJjD","file":"static/js/16.2d419391.chunk.js","sourcesContent":["import React,{Component} from 'react'\nimport { Layout, Menu, Icon } from 'antd';\nimport {Link,withRouter} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport './index.less'\n\nconst { Header, Sider, Content } = Layout;\nconst { SubMenu } = Menu;\nconst menuList=[\n    {\n    icon:'home',\n    text:\"首页\",\n    path:\"/admin/home\"\n\n    },\n    {\n        icon:\"edit\",\n        text:\"文章管理\",\n        path:\"/admin/articles\",\n        children:[\n            {\n                icon:\"edit\",\n                path:\"/admin/articles/edit\",\n                text:\"写文章\",\n            },\n            {\n                icon:\"folder\",\n                path:\"/admin/articles/manage\",\n                text:\"管理文章\",\n            }\n        ]\n    },\n    {\n      icon:'user',\n      text:\"用户\",\n      path:\"/admin/users/manage\"\n    }\n]\n\n@withRouter\n@connect((state)=>({user:state.user}),\n \n  )\nclass Admin extends Component {\n  state = {\n    collapsed: false,\n    openKeys:[],\n  };\n  async componentWillMount(){\n    const {user}=this.props\n    let {location,history} = this.props\n    if(!user||user.role!==\"管理员\"){\n      history.push('/')\n    }\n    const pathname=location.pathname;\n    const index=pathname.lastIndexOf('/');\n    const openKeys=[pathname.slice(0,index)];\n    this.setState({openKeys})\n  }\n  toggle = () => {\n    this.setState({\n      collapsed: !this.state.collapsed,\n    });\n  };\n  renderMenu(data){\n    return data.map((item)=>(\n        item.children?<SubMenu key={item.path}  title={\n            <span>\n              <Icon type={item.icon}/>\n              <span>{item.text}</span>\n            </span>\n          }>\n          {this.renderMenu(item.children)}\n          </SubMenu>\n        :<Menu.Item key={item.path}>\n            <Link to={item.path}>\n                <Icon type={item.icon} />\n                <span>{item.text}</span>\n            </Link>\n        </Menu.Item>\n    ))\n  }\n  render() {\n    return (\n      <Layout className=\"admin-Container\">\n        <Sider trigger={null} collapsible collapsed={this.state.collapsed}>\n          <div className=\"logo\" />\n          <Menu  theme=\"dark\" mode=\"inline\" defaultOpenKeys={this.state.openKeys} defaultSelectedKeys={[this.props.location.pathname]}>\n                {this.renderMenu(menuList)}\n          </Menu>\n        </Sider>\n        <Layout>\n          <Header style={{ background: '#fff', padding: 0 }}>\n            <Icon\n              className=\"trigger\"\n              type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'}\n              onClick={this.toggle}\n            />\n          </Header>\n\n          <Content className=\"right-main-wrapper\"\n            style={{\n              margin: '24px 16px',\n              padding: 24,\n              background: '#fff',\n              \n            }}\n          >\n          {this.props.children}\n          </Content>\n        </Layout>\n      </Layout>\n    );\n  }\n}\n\nexport default  Admin"],"sourceRoot":""}